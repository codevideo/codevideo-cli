"use strict";(self.webpackChunkcodevideo_ide_react_examples=self.webpackChunkcodevideo_ide_react_examples||[]).push([[929],{5318:function(e,o,n){n.r(o),n.d(o,{default:function(){return c}});var t=n(7294),s=n(4246),a=n(1051),l=n(4144),r=n(5564);function c(){const{0:e,1:o}=(0,t.useState)("step"),{0:n,1:c}=(0,t.useState)(0),{0:i,1:g}=(0,t.useState)([]),{0:d,1:u}=(0,t.useState)([]),{0:f,1:p}=(0,t.useState)(null),{0:y,1:h}=(0,t.useState)([]),{0:m,1:v}=(0,t.useState)(!1),{0:A,1:w}=(0,t.useState)(!1),{0:S,1:E}=(0,t.useState)({project:[],mode:"step",currentLessonIndex:0,currentActionIndex:0,isSoundOn:!1,actionFinishedCallback:()=>{},speakActionAudios:[],theme:"dark",allowFocusInEditor:!0,defaultLanguage:"python",isExternalBrowserStepUrl:null,withCaptions:!0,fileExplorerWidth:400,terminalHeight:350,mouseColor:"black",fontSizePx:26,keyboardTypingPauseMs:40,standardPauseMs:200,longPauseMs:200,resolution:"1080p",showDevBox:!1}),{0:V,1:x}=(0,t.useState)(!1);(0,t.useEffect)((()=>{"undefined"!=typeof window?(window.__startRecording=()=>{console.log("[__startRecording] Recording triggered programmatically!"),console.log("[__startRecording] Current state:",{project:Array.isArray(i)?"actions array ("+i.length+")":typeof i,actions:d.length,currentLessonIndex:f,monacoLoaded:A,readyToReplay:V}),x(!0)},window.addEventListener("error",(e=>{var o;console.error("Global error caught:",JSON.stringify({message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error:null===(o=e.error)||void 0===o?void 0:o.stack}))})),window.addEventListener("unhandledrejection",(e=>{console.error("Unhandled promise rejection:",JSON.stringify(e))}))):console.error("This code is intended to run in a browser environment.")}),[]),(0,t.useEffect)((()=>{if(console.log("[V3 useEffect] readyToReplay:",V,"monacoLoaded:",A),console.log("[V3 useEffect] project:",i),console.log("[V3 useEffect] actions length:",d.length),console.log("[V3 useEffect] currentLessonIndex:",f),V&&A){if(!i||Array.isArray(i)&&0===i.length)return console.error("[V3 useEffect] Project is not loaded yet, cannot start replay!"),void console.error("[V3 useEffect] Project value:",i);if(0===d.length)return console.error("[V3 useEffect] No actions available, cannot start replay!"),void console.error("[V3 useEffect] Actions:",d);var e,t;if(console.log("[V3 useEffect] Starting replay..."),console.log("[V3 useEffect] Project type:",Array.isArray(i)?"actions array":typeof i),console.log("[V3 useEffect] First few actions:",d.slice(0,3).map((e=>{var o;return{name:e.name,value:(null===(o=e.value)||void 0===o?void 0:o.substring(0,50))+"..."}}))),c(0),o("replay"),v(!0),"function"==typeof window.__onActionProgress)window.__onActionProgress({currentAction:n,totalActions:d.length,progress:0,actionName:(null===(e=d[n])||void 0===e?void 0:e.name)||"Action "+n,actionValue:(null===(t=d[n])||void 0===t?void 0:t.value)||"",timestamp:Date.now().toLocaleString()})}}),[V,A,i,d]);(0,t.useEffect)((()=>{const e=new URLSearchParams(window.location.search),o=e.get("uuid");console.log("[V3 Mount] URL params:",Object.fromEntries(e.entries())),o?(console.log("[V3 Mount] Retrieving manifest for uuid: ",o),(async e=>{try{console.log("[getManifest] Fetching manifest for UUID:",e);const o=await fetch("http://localhost:7000/get-manifest-v3?uuid="+e),n=await o.json();let t;console.log("\n-------------------\n\n\nMANIFEST DATA:\n",JSON.stringify(n,null,2),"\n\n-------------------\n");let s=null;n&&n.actions?(t=n.actions,s=null,console.log("[getManifest] FOUND "+n.actions.length+" actions in manifest"),console.log("[getManifest] First action:",JSON.stringify(n.actions[0])),console.log("[getManifest] Last action:",JSON.stringify(n.actions[n.actions.length-1])),u(n.actions),console.log("[getManifest] Setting project to actions array, currentLessonIndex should be null")):n.lesson?(t=n.lesson,s=null,console.log("[getManifest] FOUND "+n.lesson.actions.length+" actions in lesson"),console.log("[getManifest] Lesson structure:",JSON.stringify(Object.keys(n.lesson))),console.log("[getManifest] First lesson action:",JSON.stringify(n.lesson.actions[0])),u(n.lesson.actions),console.log("[getManifest] Setting project to lesson object, currentLessonIndex should be null")):(console.error("[getManifest] No actions or lesson found in manifest data!"),console.error("[getManifest] Data keys:",Object.keys(n||{}))),console.log("[getManifest] About to set project and actions"),console.log("[getManifest] Project type:",Array.isArray(t)?"array":typeof t),console.log("[getManifest] Lesson index:",s),g(t||[]),p(s),h(n.audioItems),n.codeVideoIDEProps&&(console.log("[getManifest] Applying IDE props from manifest:",n.codeVideoIDEProps),E((e=>({...e,...n.codeVideoIDEProps})))),console.log("[getManifest] Manifest processing complete")}catch(o){console.error("Error getting manifest: ",JSON.stringify(o))}})(o)):console.log("[V3 Mount] No UUID found in URL parameters")}),[]),(0,t.useEffect)((()=>{console.log("[V3 State] project changed:",Array.isArray(i)?"actions array ("+i.length+")":typeof i)}),[i]),(0,t.useEffect)((()=>{console.log("[V3 State] actions changed:",d.length)}),[d]),(0,t.useEffect)((()=>{console.log("[V3 State] currentLessonIndex changed:",f)}),[f]),(0,t.useEffect)((()=>{console.log("[V3 State] mode changed:",e)}),[e]),(0,t.useEffect)((()=>{console.log("[V3 State] currentActionIndex changed:",n)}),[n]);var k;(console.log("[V3 Render] About to render CodeVideoIDE with:"),console.log("[V3 Render] - project type:",Array.isArray(i)?"array["+i.length+"]":typeof i),console.log("[V3 Render] - actions length:",d.length),console.log("[V3 Render] - mode:",e),console.log("[V3 Render] - currentActionIndex:",n),console.log("[V3 Render] - currentLessonIndex:",f),i)&&(Array.isArray(i)?(console.log("[V3 Render] - project is actions array with length:",i.length),console.log("[V3 Render] - first 3 actions:",JSON.stringify(i.slice(0,3),null,2))):(console.log("[V3 Render] - project keys:",JSON.stringify(Object.keys(i))),"actions"in i&&console.log("[V3 Render] - project.actions length:",(null===(k=i.actions)||void 0===k?void 0:k.length)||0)));return t.createElement(a.Q2,{accentColor:"mint",appearance:"dark",panelBackground:"translucent",radius:"large"},t.createElement(l.k,{direction:"column",justify:"center",align:"center"},t.createElement(r.x,{style:{height:"100vh",width:"100vw"}},t.createElement(s.Zv,Object.assign({},S,{project:i,currentLessonIndex:0,mode:e,currentActionIndex:n,isSoundOn:m,actionFinishedCallback:()=>{console.log("[goToNextAction] Going to next action..."),console.log("[goToNextAction] Current index:",n,"Total actions:",d.length);const e=n+1;var o,t,s;e<d.length?(console.log("[goToNextAction] Moving to action",e,":",null===(o=d[e])||void 0===o?void 0:o.name),"function"==typeof window.__onActionProgress&&window.__onActionProgress({currentAction:e,totalActions:d.length,progress:(e/d.length*100).toFixed(1),actionName:(null===(t=d[e])||void 0===t?void 0:t.name)||"Action "+e,actionValue:(null===(s=d[e])||void 0===s?void 0:s.value)||"",timestamp:Date.now().toLocaleString()})):console.log("[goToNextAction] Reached end of actions, next index would be:",e);c(e)},playBackCompleteCallback:()=>{var e,o;(console.log("[playBackCompleteCallback] Playback complete!"),console.log("[playBackCompleteCallback] Final action index:",n),console.log("[playBackCompleteCallback] Total actions:",d.length),"function"==typeof window.__onActionProgress)&&window.__onActionProgress({currentAction:d.length,totalActions:d.length,progress:"100.0",actionName:(null===(e=d[d.length-1])||void 0===e?void 0:e.name)||"Action "+d.length,actionValue:(null===(o=d[d.length-1])||void 0===o?void 0:o.value)||"",timestamp:Date.now().toLocaleString()})},speakActionAudios:y,monacoLoadedCallback:()=>w(!0),showDevBox:!1})))))}}}]);
//# sourceMappingURL=component---src-pages-v-3-tsx-d673363d86d1467b9043.js.map