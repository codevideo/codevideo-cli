{"version":3,"file":"component---src-pages-v-3-tsx-6204f9b66221d3ba9f82.js","mappings":"mPAQe,SAASA,IACtB,MAAM,EAACC,EAAI,EAAEC,IAAWC,EAAAA,EAAAA,UAAkB,SACpC,EAACC,EAAkB,EAAEC,IAAyBF,EAAAA,EAAAA,UAAS,IACvD,EAACG,EAAO,EAAEC,IAAcJ,EAAAA,EAAAA,UAAyB,KACjD,EAACK,EAAU,EAAEC,IAAiBN,EAAAA,EAAAA,UAA4B,KAC1D,EAACO,EAAS,EAAEC,IAAgBR,EAAAA,EAAAA,WAAkB,IAC9C,EAACS,EAAY,EAAEC,IAAmBV,EAAAA,EAAAA,WAAkB,IAGpD,EAACW,EAAa,EAAEC,IAAoBZ,EAAAA,EAAAA,WAAS,IAGnDa,EAAAA,EAAAA,YAAU,KACPC,OAAeC,iBAAmB,KACjCC,QAAQC,IAAI,yCACZL,GAAiB,EAAK,CACvB,GACA,KAEHC,EAAAA,EAAAA,YAAU,KAMwD,QAL5DF,GAAiBF,IACnBO,QAAQC,IAAI,sBACZf,EAAsB,GACtBH,EAAQ,UACRS,GAAa,GACqC,mBAAtCM,OAAeI,oBACxBJ,OAAeI,mBAAmB,CACjCC,cAAelB,EACfmB,aAAcjB,EAAQkB,OACtBC,SAAU,EACVC,YAAuC,QAA3B,EAAApB,EAAQF,UAAmB,aAA3BuB,EAA6BC,OAAI,UAAcxB,EAC3DyB,aAAwC,QAA3B,EAAAvB,EAAQF,UAAmB,aAA3B0B,EAA6BC,QAAS,GACnDC,UAAWC,KAAKC,MAAMC,mBAG5B,GACC,CAACrB,EAAeF,KAgBnBI,EAAAA,EAAAA,YAAU,KACR,MACMoB,EADY,IAAIC,gBAAgBpB,OAAOqB,SAASC,QAC/BC,IAAI,QACvBJ,IACFjB,QAAQC,IAAI,iCAAkCgB,GAjB9BK,WAClB,IACE,MAAMC,QAAiBC,MAAM,8CAA8CP,GACrEQ,QAAiCF,EAASG,OAChD1B,QAAQC,IAAI,kBAAmBwB,GAC/BrC,EAAWqC,EAAKtC,SAChBG,EAAcmC,EAAKpC,WACrB,CAAE,MAAOsC,GACP3B,QAAQ2B,MAAM,2BAA4BA,EAC5C,GASEC,CAAYX,GACd,GACC,IAuCH,OACEY,EAAAA,cAACC,EAAAA,GAAK,CACJC,YAAY,OACZC,WAAW,OACXC,gBAAgB,cAChBC,OAAO,SAEPL,EAAAA,cAACM,EAAAA,EAAI,CAACC,UAAU,SAASC,QAAQ,SAASC,MAAM,UAC9CT,EAAAA,cAACU,EAAAA,EAAG,CACFC,MAAO,CACLC,OAAQ,QACRC,MAAO,UAGTb,EAAAA,cAACc,EAAAA,EAAY,CACXC,MAAM,OACNC,QAAS1D,EACTL,KAAMA,EACNgE,oBAAoB,EACpBC,gBAAiB,SACjBC,yBAA0B,KAC1B/D,mBAAoBA,EACpBgE,mBAAoB,EACpB1D,UAAWA,EAIX2D,cAAc,EACdC,uBAhEa,KACrBnD,QAAQC,IAAI,2BACZ,MAAMmD,EAAYnE,EAAqB,EAGyB,QAF5DmE,EAAYjE,EAAQkB,SAE4B,mBAAtCP,OAAeI,oBACxBJ,OAAeI,mBAAmB,CACjCC,cAAeiD,EACfhD,aAAcjB,EAAQkB,OACtBC,UAAW8C,EAAYjE,EAAQkB,OAAS,KAAKgD,QAAQ,GACrD9C,YAA8B,QAAlB,EAAApB,EAAQiE,UAAU,aAAlBE,EAAoB7C,OAAI,UAAc2C,EAClD1C,aAA+B,QAAlB,EAAAvB,EAAQiE,UAAU,aAAlBG,EAAoB3C,QAAS,GAC1CC,UAAWC,KAAKC,MAAMC,oBAI5B9B,EAAsBkE,EAAU,EAiDxBI,yBA7CuB,KAG+B,SAF9DxD,QAAQC,IAAI,sBAEsC,mBAAtCH,OAAeI,qBACxBJ,OAAeI,mBAAmB,CACjCC,cAAehB,EAAQkB,OACvBD,aAAcjB,EAAQkB,OACtBC,SAAU,QACVC,YAAuC,QAA3B,EAAApB,EAAQA,EAAQkB,OAAS,UAAE,aAA3BoD,EAA6BhD,OAAI,UAActB,EAAQkB,OACnEK,aAAwC,QAA3B,EAAAvB,EAAQA,EAAQkB,OAAS,UAAE,aAA3BqD,EAA6B9C,QAAS,GACnDC,UAAWC,KAAKC,MAAMC,kBAE1B,EAmCQ2C,kBAAmBtE,EACnBuE,kBAAmB,IACnBC,eAAgB,IAChBC,WAAW,QACXC,WAAY,GACZC,qBAAsB,IAAMtE,GAAgB,OAMxD,C","sources":["webpack://codevideo-ide-react-examples/./src/pages/v3.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { GUIMode, IAction, IAudioItem, ICodeVideoManifest } from \"@fullstackcraftllc/codevideo-types\"\nimport { CodeVideoIDE } from \"@fullstackcraftllc/codevideo-ide-react\"\nimport { Box, Flex, Theme } from \"@radix-ui/themes\";\nimport { useEffect, useState } from \"react\";\n\n// this example is nearly the same as the record example, but with some puppeteer window injections\n// it also loads the manifest from the CodeVideo API running at localhost:7000\nexport default function Puppeteer() {\n  const [mode, setMode] = useState<GUIMode>('step')\n  const [currentActionIndex, setCurrentActionIndex] = useState(0)\n  const [actions, setActions] = useState<Array<IAction>>([])\n  const [audioItems, setAudioItems] = useState<Array<IAudioItem>>([])\n  const [isSoundOn, setIsSoundOn] = useState<boolean>(false)\n  const [monacoLoaded, setMonacoLoaded] = useState<boolean>(false)\n\n  // on user interaction, set mode to 'replay' and reset the current action index\n  const [readyToReplay, setReadyToReplay] = useState(false)\n\n  // Expose the __startRecording function globally.\n  useEffect(() => {\n    (window as any).__startRecording = () => {\n      console.log(\"Recording triggered programmatically!\");\n      setReadyToReplay(true);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (readyToReplay && monacoLoaded) {\n      console.log('Starting replay...')\n      setCurrentActionIndex(0)\n      setMode('replay')\n      setIsSoundOn(true)\n      if (typeof (window as any).__onActionProgress === 'function') {\n        (window as any).__onActionProgress({\n          currentAction: currentActionIndex,\n          totalActions: actions.length,\n          progress: 0,\n          actionName: actions[currentActionIndex]?.name || `Action ${currentActionIndex}`,\n          actionValue: actions[currentActionIndex]?.value || '',\n          timestamp: Date.now().toLocaleString()\n        });\n      }\n    }\n  }, [readyToReplay, monacoLoaded])\n\n  // gets manifest from the CodeVideo API running at localhost:7000\n  const getManifest = async (uuid: string) => {\n    try {\n      const response = await fetch(`http://localhost:7000/get-manifest-v3?uuid=${uuid}`)\n      const data: ICodeVideoManifest = await response.json()\n      console.log(\"Manifest data: \", data)\n      setActions(data.actions)\n      setAudioItems(data.audioItems)\n    } catch (error) {\n      console.error(\"Error getting manifest: \", error)\n    }\n  }\n\n  // on mount, load uuid from \"uuid\" property in the url\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search)\n    const uuid = urlParams.get('uuid')\n    if (uuid) {\n      console.log(\"Retrieving manifest for uuid: \", uuid)\n      getManifest(uuid)\n    }\n  }, [])\n\n  // to continue to next action in replay mode, you need to implementation a function for the actionFinishedCallback prop\n  const goToNextAction = () => {\n    console.log(\"Going to next action...\")\n    const nextIndex = currentActionIndex + 1\n    if (nextIndex < actions.length) {\n      // Send progress update - see scripts/make-video-from-record-page.js\n      if (typeof (window as any).__onActionProgress === 'function') {\n        (window as any).__onActionProgress({\n          currentAction: nextIndex,\n          totalActions: actions.length,\n          progress: (nextIndex / actions.length * 100).toFixed(1),\n          actionName: actions[nextIndex]?.name || `Action ${nextIndex}`,\n          actionValue: actions[nextIndex]?.value || '',\n          timestamp: Date.now().toLocaleString()\n        });\n      }\n    }\n    setCurrentActionIndex(nextIndex)\n  }\n\n  // when the video is complete, you need may want to implement a function for the playBackCompleteCallback prop\n  const playBackCompleteCallback = () => {\n    console.log(\"Playback complete!\")\n    // Send final progress update (the one with 100%) only once when the final action is reached this is actually when nextIndex === actions.length\n    if (typeof (window as any).__onActionProgress === 'function') {\n      (window as any).__onActionProgress({\n        currentAction: actions.length,\n        totalActions: actions.length,\n        progress: \"100.0\",\n        actionName: actions[actions.length - 1]?.name || `Action ${actions.length}`,\n        actionValue: actions[actions.length - 1]?.value || '',\n        timestamp: Date.now().toLocaleString()\n      });\n    }\n  }\n\n  // Note the codevideoIDE must be rendered within a radix <Theme/> scope to render properly\n  return (\n    <Theme\n      accentColor=\"mint\"\n      appearance=\"dark\"\n      panelBackground=\"translucent\"\n      radius=\"large\"\n    >\n      <Flex direction=\"column\" justify=\"center\" align=\"center\">\n        <Box\n          style={{\n            height: '100vh',\n            width: '100vw',\n          }}\n        >\n          <CodeVideoIDE\n            theme='dark'\n            project={actions}\n            mode={mode}\n            allowFocusInEditor={false}\n            defaultLanguage={'python'}\n            isExternalBrowserStepUrl={null}\n            currentActionIndex={currentActionIndex}\n            currentLessonIndex={0}\n            isSoundOn={isSoundOn}\n            // if you're using CodeVideo to record a video for something like youtube, captions may not be a good idea\n            // if you're exporting a video to your own site, captions might be really nice!\n            // for this example, since the user gets directly in their email, captions are nice\n            withCaptions={true}\n            actionFinishedCallback={goToNextAction}\n            playBackCompleteCallback={playBackCompleteCallback}\n            // this example has audios! see codevideo-backend-engine, command: `npm run generate-audio-manifest <your actions json or ts file here> elevenlabs`\n            speakActionAudios={audioItems}\n            fileExplorerWidth={400}\n            terminalHeight={250}\n            mouseColor=\"black\"\n            fontSizePx={24}\n            monacoLoadedCallback={() => setMonacoLoaded(true)}\n          />\n        </Box>\n      </Flex>\n    </Theme>\n  )\n}\n"],"names":["Puppeteer","mode","setMode","useState","currentActionIndex","setCurrentActionIndex","actions","setActions","audioItems","setAudioItems","isSoundOn","setIsSoundOn","monacoLoaded","setMonacoLoaded","readyToReplay","setReadyToReplay","useEffect","window","__startRecording","console","log","__onActionProgress","currentAction","totalActions","length","progress","actionName","_actions$currentActio","name","actionValue","_actions$currentActio2","value","timestamp","Date","now","toLocaleString","uuid","URLSearchParams","location","search","get","async","response","fetch","data","json","error","getManifest","React","Theme","accentColor","appearance","panelBackground","radius","Flex","direction","justify","align","Box","style","height","width","CodeVideoIDE","theme","project","allowFocusInEditor","defaultLanguage","isExternalBrowserStepUrl","currentLessonIndex","withCaptions","actionFinishedCallback","nextIndex","toFixed","_actions$nextIndex","_actions$nextIndex2","playBackCompleteCallback","_actions","_actions2","speakActionAudios","fileExplorerWidth","terminalHeight","mouseColor","fontSizePx","monacoLoadedCallback"],"sourceRoot":""}